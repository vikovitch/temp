import keyboard
import time

def execute_inputs(inputs, stop_key='q', start_index=0):
    stop_playback = [False]  # Use a list to modify the value within a nested function

    def on_stop_key(event):
        stop_playback[0] = True

    # Set up the stop key listener
    keyboard.on_press_key(stop_key, on_stop_key)

    try:
        # Loop through inputs starting from the specified start_index
        for delay_before, key in inputs[start_index:]:
            if stop_playback[0]:
                print("Playback stopped by user.")
                return

            # Wait for the specified delay before pressing the key
            time.sleep(delay_before)
            # Press and release the key
            keyboard.press_and_release(key)
    finally:
        # Unregister the stop key listener when done
        keyboard.unhook_all()


# Example usage
inputs = [

    (1, 'i'),
    (0.3, 'p'),
    (0.2, 'a'),
    (0.2, 's'),
    (0.2, 'a'),
    (0.2, 'p'),
    (0.2, 'i'),
    (0.2, 'p'),
    (0.2, 'a'),
    (0.2, 's'),
    (0.2, 'a'),
    (0.2, 'p'),
    (0.2, 'i'),
    (0.2, 'p'),
    (0.2, 'a'),
    (0.2, 's'),
    (0.2, 'a'),
    (0.2, 'p'),
    (0.2, 'i'),
    (0.2, 'p'),
    (0.2, 'a'),
    (0.2, 's'),
    (0.3, 'a'),
    (0.3, 'p'),

    (0.4, 'u'),
    (0.3, 'o'),
    (0.2, 'a'),
    (0.2, 's'),
    (0, "k"),
    (0.2, 'a'),
    (0.2, 'o'),
    (0.2, 'u'),
    (0.2, 'o'),
    (0.2, 'a'),
    (0.2, 'd'),
    (0.2, 'a'),
    (0.2, 'o'),
    (0.2, 'u'),
    (0.2, 'o'),
    (0.2, 'a'),
    (0.2, 'd'),
    (0, "k"),
    (0.2, 'a'),
    (0.2, 'o'),
    (0.2, 'u'),
    (0.2, 'o'),
    (0.2, 'a'),
    (0.2, 'f'),
    (0.3, 'a'),
    (0.3, 'o'),

    (0.3, 'y'),
    (0.2, 'p'),
    (0.2, 's'),
    (0.2, 'h'),
    (0, "k"),
    (0.2, 's'),
    (0.2, 'p'),
    (0.2, 'y'),
    (0.2, 'p'),
    (0.2, 's'),
    (0.2, 'h'),
    (0.2, 's'),
    (0.2, 'p'),
    (0.2, 'y'),
    (0.2, 'p'),
    (0.2, 's'),
    (0.2, 'h'),
    (0, "k"),
    (0.2, 's'),
    (0.2, 'p'),
    (0.2, 'y'),
    (0.2, 'p'),
    (0.2, 's'),
    (0.2, 'h'),
    (0.2, 's'),
    (0.3, 'p'),

    (0.4, 't'),
    (0.3, 'o'),
    (0.2, 'f'),
    (0.2, 'k'),
    (0, "z"),
    (0.2, 'f'),
    (0.2, 'o'),
    (0.2, 't'),
    (0.2, 'o'),
    (0.2, 'f'),
    (0.2, 'k'),
    (0.2, 'f'),
    (0.2, 'o'),
    (0.2, 't'),
    (0.2, 'o'),
    (0.2, 'f'),
    (0.2, 'k'),
    (0, "z"),
    (0.2, 'f'),
    (0.2, 'o'),
    (0.2, 't'),
    (0.2, 'o'),
    (0.2, 'f'),
    (0.2, 'l'),
    (0.2, 'f'),
    (0.2, 'o'),

    # part 1 done

    (0.4, 'i'),
    (0, "z"),
    (0.3, 'p'),
    (0.2, 'a'),
    (0, "j"),
    (0.2, 's'),
    (0.2, 'a'),
    (0, "k"),
    (0.2, 'p'),
    (0.2, 'i'),
    (0, "l"),
    (0.2, 'p'),
    (0.2, 'a'),
    (0.2, 's'),
    (0.2, 'a'),
    (0.2, 'p'),
    (0.2, 'i'),  #
    (0, "z"),
    (0.2, 'p'),
    (0.2, 'a'),
    (0, "j"),
    (0.2, 's'),
    (0.2, 'a'),
    (0, "k"),
    (0.2, 'p'),
    (0.2, 'i'),
    (0, "l"),
    (0.2, 'p'),
    (0.2, 'a'),
    (0.2, 's'),
    (0, "k"),
    (0.2, 'a'),
    (0, "j"),
    (0.2, 'p'),
    (0.3, 'u'),
    (0, "z"),
    (0.3, 'o'),
    (0.2, 'a'),
    (0, "h"),
    (0.2, 's'),
    (0.2, 'a'),
    (0, "j"),
    (0.2, 'o'),
    (0.2, 'u'),
    (0, "k"),
    (0.2, 'o'),
    (0.2, 'a'),
    (0.2, 'd'),
    (0.2, 'a'),
    (0.2, 'o'),
    (0.2, 'u'),  #
    (0, "z"),
    (0.2, 'o'),
    (0.2, 'a'),
    (0, "h"),
    (0.2, 'f'),
    (0.2, 'a'),
    (0, "j"),
    (0.2, 'o'),
    (0.2, 'u'),
    (0, "k"),
    (0.2, 'o'),
    (0.2, 'a'),
    (0.2, 'f'),
    (0, "j"),
    (0.2, 'a'),
    (0, "h"),
    (0.2, 'o'),

    (0.2, 'y'),
    (0, "z"),
    (0.2, 'p'),
    (0.2, 's'),
    (0, "j"),
    (0.2, 'h'),
    (0.2, 's'),
    (0, "k"),
    (0.2, 'p'),
    (0.2, 'y'),
    (0, "l"),
    (0.2, 'p'),
    (0.2, 's'),
    (0.2, 'h'),
    (0.2, 's'),
    (0.2, 'p'),
    (0.2, 'y'),  #
    (0, "z"),
    (0.2, 'p'),
    (0.2, 's'),
    (0, "j"),
    (0.2, 'h'),
    (0.2, 's'),
    (0, "k"),
    (0.2, 'p'),
    (0.2, 'y'),
    (0, "l"),
    (0.2, 'p'),
    (0.2, 's'),
    (0.2, 'h'),
    (0, "k"),
    (0.2, 's'),
    (0, "z"),
    (0.2, 'p'),

    (0.3, 't'),
    (0, "h"),
    (0, "v"),
    (0.2, 'o'),
    (0.2, 'g'),
    (0, "c"),
    (0.2, 'h'),
    (0.2, 'g'),
    (0, "z"),
    (0.2, 'o'),
    (0.2, 't'),
    (0, "k"),
    (0.2, 'o'),
    (0.2, 'd'),
    (0.2, 'h'),
    (0.2, 'd'),
    (0.2, 'o'),
    (0.2, 't'),  #
    (0.2, 'o'),
    (0.2, 'f'),
    (0.2, 'k'),
    (0, "k"),
    (0.2, 'f'),
    (0.25, 'o'),
    (0.25, 't'),
    (0, "k"),
    (0, "z"),
    (0.25, 'o'),
    (0.25, 'f'),
    (0.25, 'k'),
    (0, "l"),
    (0, "c"),
    (0.25, 'f'),
    (0.3, 'o'),

    # this is where the fun begins, part 2 done

    (0.6, '9'),
    (0, "l"),
    (0.25, 'e'),
    (0.25, 't'),
    (0.25, "s"),
    (0.25, 'o'),
    (0, "f"),
    (0.25, "f"),
    (0.25, 'y'),
    (0, "f"),
    (0.25, 'p'),
    (0.25, 'a'),
    (0.25, 'g'),
    (0.25, 'i'),
    (0, "d"),
    (0.25, "f"),
    (0.25, 'y'),
    (0, "h"),
    (0.25, 'p'),
    (0.25, 's'),
    (0.25, "p"),
    (0.25, 'p'),
    (0, "d"),
    (0.25, "p"),
    (0.25, 'y'),
    (0, "s"),
    (0.25, 'p'),
    (0.25, 's'),
    (0.25, 'f'),
    (0.5, 'a'),

    (0.25, '1'),
    (0.25, '5'),
    (0.25, '8'),
    (0, "f"),
    (0, "k"),
    (0.25, '0'),
    (0, "l"),
    (0.25, 'r'),
    (0, "k"),
    (0.25, 'w'),
    (0.25, '8'),
    (0, "o"),
    (0, "f"),
    (0.25, 'w'),
    (0.25, 'r'),
    (0.25, 'u'),
    (0.25, 'r'),
    (0, "d"),
    (0.25, 'w'),
    (0.25, '8'),  #
    (0, "o"),
    (0, "d"),
    (0.25, 'w'),
    (0.25, 'r'),
    (0.25, 'y'),
    (0.25, 'u'),
    (0, "f"),
    (0.25, 'y'),
    (0, "h"),
    (0.25, 'u'),
    (0, "h"),
    (0.25, 't'),
    (0.25, 'y'),
    (0.25, 'o'),
    (0.25, "s"),
    (0.25, 't'),

    (0.35, 'shift+6'),
    (0, "f"),
    (0, "h"),
    (0, "l"),
    (0.25, 'q'),
    (0.25, 'e'),
    (0.25, 'shift+e'),
    (0, "d"),
    (0.25, 'i'),
    (0.25, "z"),
    (0.25, 't'),
    (0, "h"),
    (0, "l"),
    (0.25, 'shift+e'),
    (0.25, "s"),
    (0.25, 't'),
    (0.25, "f"),
    (0.25, 'q'),
    (0, "d"),
    (0.25, '9'),  #
    (0, "o"),
    (0, "h"),
    (0.25, 'q'),
    (0.25, 'e'),
    (0.25, 't'),
    (0.25, "d"),
    (0, "g"),
    (0.25, '0'),
    (0.25, 'q'),
    (0, "s"),
    (0, "f"),
    (0.25, 'e'),
    (0.25, 't'),
    (0.25, 'u'),
    (0.25, 'o'),
    (0.25, 'y'),

    (0.25, 'e'),
    (0, 'u'),
    (0.25, 't'),
    (0.25, 'y'),
    (0, "f"),
    (0, "k"),
    (0.25, 't'),
    (0, "l"),
    (0.25, 'y'),
    (0, "k"),
    (0.25, 'o'),
    (0.25, "d"),
    (0.25, "a"),
    (0.25, 't'),
    (0.25, 'y'),
    (0.25, "d"),
    (0.5, '0'),
    (0, "s"),
    (0.25, 'e'),
    (0.25, 'y'),
    (0.25, 'o'),
    (0.25, 'u'),
    (0.5, 'w'),
    (0.25, 'r'),
    (0.3, 'u'),
    (0, "f"),
    (0.4, 'o'),
    (0, "k"),
    (0.5, 'p'),
    (0, "z"),
    (0, "v"),

    (0.6, '8'),
    (0.03, 'q'),
    (0.05, 'e'),
    (0.7, 'u'),
    (0.2, "j"),
    (0.3, 'i'),
    (0.5, 'i'),
    (0.25, "j"),
    (0.5, 'u'),
    (0.25, 'i'),
    (0, "j"),
    (0.5, 'e'),
    (0, 't'),
    (0.5, 'p'),
    (0, "j"),
    (0.5, 'a'),
    (0.5, 's'),
    (0.25, "j"),
    (0.5, 'a'),
    (0.25, 'o'),
    (0, "l"),
    (0.5, 't'),
    (0, 'u'),
    (0, "h"),
    (1, "h"),
    (0.5, "f"),
    (0.75, 'y'),
    (0.4, "f"),
    (0.3, "h"),
    (0.6, "h"),
    (0, "z"),


     # the real liquidity


    (3.5, 'q'),
    (0, "s"),
    (0, "f"),
    (0, "l"),
    (0, "s"),
    (0, "f"),
    (0, "l"),
    (0.15, 't'),
    (0.15, 'u'),
    (0.15, 'p'),
    (0.15, 'u'),
    (0.2, 'y'),
    (0.15, 'o'),
    (0.15, 'a'),
    (0.15, 'o'),
    (0.15, 'i'),
    (0.15, 'y'),
    (0, "d"),
    (0, "z"),
    (0, "d"),
    (0, "z"),
    (0.15, 'r'),
    (0.15, 'w'),
    (0.15, 'q'),
    (0.17, '9'),
    (0.18, '7'),
    (0.1, "f"),
    (0, "x"),
    (0.07, '2'),

    (0.15, 'q'),
    (0, "f"),
    (0, "x"),
    (0, "f"),
    (0, "x"),
    (0.15, 't'),
    (0.15, 'u'),
    (0.15, 'o'),
    (0.15, 'a'),
    (0.15, 'o'),
    (0.15, 't'),
    (0, "l"),
    (0, "m"),
    (0, "l"),
    (0, "m"),
    (0.15, 'o'),
    (0, "k"),
    (0, "n"),
    (0, "k"),
    (0, "n"),
    (0.25, 'p'),
    (0.15, "f"),
    (0, "x"),
    (0, "f"),
    (0, "x"),
    (0.15, 'i'),
    (0.15, "d"),
    (0, "z"),
    (0.23, '1'),
    (0, "a"),
    (0, "h"),
    (0, "k"),
    (0, "a"),
    (0, "h"),
    (0, "k"),
    (0.2, '5'),
    (0.15, '8'),
    (0, "a"),
    (0, "a"),
    (0.15, '0'),
    (0, "s"),
    (0, "s"),
    (0.15, 'w'),
    (0, "a"),
    (0, "a"),
    (0.15, 'y'),
    (0, "o"),
    (0, "o"),
    (0.15, '8'),
    (0, "y"),
    (0, "y"),
    (0.15, 'w'),
    (0.15, 'r'),
    (0, "g"),
    (0, "c"),
    (0.2, 'y'),
    (0.2, "f"),
    (0, "x"),

    (0.25, '7'),
    (0, "d"),
    (0, "z"),
    (0, "d"),
    (0, "z"),
    (0.15, 'q'),
    (0.15, 'e'),
    (0.15, 'r'),
    (0.15, 'y'),
    (0.2, "f"),
    (0, "x"),
    (0, "f"),
    (0, "x"),
    (0.2, '3'),
    (0, "s"),
    (0, "l"),
    (0, "s"),
    (0, "l"),
    (0.12, '7'),
    (0.12, '0'),
    (0.12, 'shift+w'),
    (0.12, 't'),
    (0.12, 'shift+o'),
    (0.12, 's'),
    (0.12, 'o'),
    (0.12, 't'),

    (0.2, '6'),
    (0, "t"),
    (0, "o"),
    (0, "a"),
    (0.2, '0'),
    (0.2, 'e'),
    (0, "s"),
    (0, "l"),
    (0.2, 'e'),
    (0.2, 't'),
    (0, "d"),
    (0, "z"),
    (0, "d"),
    (0, "z"),
    (0.2, 'u'),
    (0.2, 'e'),
    (0, "f"),
    (0, "j"),
    (0, "l"),
    (0, "x"),
    (0.2, 't'),
    (0.2, 'o'),
    (0, "k"),
    (0, "n"),
    (0.2, 'r'),
    (0.2, 't'),
    (0, "l"),
    (0, "m"),
    (0.2, '9'),
    (0.2, '5'),  #
    (0, "h"),
    (0, "l"),
    (0, "z"),
    (0, "v"),
    (0.25, '9'),
    (0.2, 'w'),
    (0.2, 'r'),
    (0.2, 't'),
    (0.2, "h"),
    (0.2, 'w'),
    (0, "l"),
    (0.2, 'y'),
    (0, "h"),
    (0.2, 'o'),
    (0, "l"),
    (0.2, "c"),
    (0, "c"),
    (0.2, 'r'),
    (0.2, "x"),
    (0, "x"),
    (0.25, '4'),  #
    (0, "f"),
    (0, "j"),
    (0, "x"),
    (0, "j"),
    (0, "x"),
    (0.2, '8'),
    (0.2, 'q'),
    (0.2, 'w'),
    (0.2, 'e'),
    (0.2, 't'),
    (0, "x"),
    (0, "x"),
    (0.2, 'q'),
    (0, "j"),
    (0, "z"),
    (0.2, 't'),
    (0, "l"),
    (0.2, 'i'),
    (0.2, 'w'),
    (0.2, 'e'),
    (0.2, "l"),
    (0, "l"),
    (0.2, '2'),  #
    (0, "j"),
    (0, "v"),
    (0, "j"),
    (0, "v"),
    (0.25, '6'),
    (0.2, '9'),
    (0.2, '0'),
    (0.2, 'q'),
    (0.2, 'e'),
    (0.25, '9'),
    (0, "v"),
    (0, "n"),
    (0.2, 'q'),
    (0, "k"),
    (0, "k"),
    (0.2, 'e'),
    (0, "x"),
    (0, "x"),
    (0.2, 't'),
    (0, "b"),
    (0, "b"),
    (0.25, '0'),
    (0, "v"),
    (0, "v"),
    (0.35, 'q'),
    (0, "s"),

    (0.4, '6'),
    (0, 'e'),
    (0, "l"),
    (0, "x"),
    (0, "b"),
    (0, "m"),
    (0, "l"),
    (0, "x"),
    (0.25, 't'),
    (0.2, 'u'),
    (0.2, 'o'),
    (0.05, "h"),
    (0, "k"),
    (0.2, 'p'),
    (0.2, 's'),
    (0, "c"),
    (0.25, '8'),  #
    (0, 't'),
    (0, "j"),
    (0.05, "x"),
    (0, "j"),
    (0.05, "x"),
    (0.2, 'u'),
    (0.2, 'o'),
    (0.2, 's'),
    (0.2, 'f'),
    (0, "z"),
    (0, "z"),
    (0.2, 'h'),
    (0, "a"),
    (0, "a"),
    (0.25, 'q'),  #
    (0, "s"),
    (0, "f"),
    (0.2, 't'),
    (0.2, 'i'),
    (0.2, 'w'),
    (0.2, 'y'),
    (0, "f"),
    (0, "h"),
    (0, "z"),
    (0.2, 'r'),
    (0, "k"),
    (0.25, '7'),  #
    (0, "o"),
    (0, "f"),
    (0, "h"),
    (0.25, '0'),
    (0.2, 'w'),
    (0.2, 'r'),
    (0.2, 'u'),
    (0.25, 'o'),

    (0.3, 'w'),
    (0, "a"),
    (0.3, "u"),
    (0.3, "f"),
    (0.32, "h"),
    (0.35, "k"),
    (0.4, '4'),
    (0, '0'),
    (0, "l"),
    (0.6, 'r'),
    (0, "k"),
    (0.5, 't'),
    (0, "l"),
    (0.5, 'o'),
    (0, "v"),
    (0.6, 'i'),
    (0, "l"),
    (0.3, 'u'),
    (0, "l"),
    (0.6, '8'),
    (0, '0'),
    (0, 'shift+w'),
    (0, "l"),
    (0.3, "k"),
    (0.3, "l"),
    (0.3, 't'),
    (0, "v"),
    (0.6, "l"),
    (0.2, 'y'),
    (0.4, "l"),
    (0.3, "v"),
    (0.2, 'r'),

    # last bit

    (2, 'i'),
    (0, "z"),
    (0.3, 'p'),
    (0.2, 'a'),
    (0, "j"),
    (0.2, 's'),
    (0.2, 'a'),
    (0, "k"),
    (0.2, 'p'),
    (0.2, 'i'),
    (0, "l"),
    (0.2, 'p'),
    (0.2, 'a'),
    (0.2, 's'),
    (0.2, 'a'),
    (0.2, 'p'),
    (0.2, 'i'),  #
    (0, "z"),
    (0.2, 'p'),
    (0.2, 'a'),
    (0, "j"),
    (0.2, 's'),
    (0.2, 'a'),
    (0, "k"),
    (0.2, 'p'),
    (0.2, 'i'),
    (0, "l"),
    (0.2, 'p'),
    (0.2, 'a'),
    (0.2, 's'),
    (0, "k"),
    (0.2, 'a'),
    (0, "j"),
    (0.2, 'p'),
    (0.3, 'u'),
    (0, "z"),
    (0.3, 'o'),
    (0.2, 'a'),
    (0, "h"),
    (0.2, 's'),
    (0.2, 'a'),
    (0, "j"),
    (0.2, 'o'),
    (0.2, 'u'),
    (0, "k"),
    (0.2, 'o'),
    (0.2, 'a'),
    (0.2, 'd'),
    (0.2, 'a'),
    (0.2, 'o'),
    (0.2, 'u'),  #
    (0, "z"),
    (0.2, 'o'),
    (0.2, 'a'),
    (0, "h"),
    (0.2, 'f'),
    (0.2, 'a'),
    (0, "j"),
    (0.2, 'o'),
    (0.2, 'u'),
    (0, "k"),
    (0.2, 'o'),
    (0.2, 'a'),
    (0.2, 'f'),
    (0, "j"),
    (0.2, 'a'),
    (0, "h"),
    (0.2, 'o'),

    (0.2, 'y'),
    (0, "z"),
    (0.2, 'p'),
    (0.2, 's'),
    (0, "j"),
    (0.2, 'h'),
    (0.2, 's'),
    (0, "k"),
    (0.2, 'p'),
    (0.2, 'y'),
    (0, "l"),
    (0.2, 'p'),
    (0.2, 's'),
    (0.2, 'h'),
    (0.2, 's'),
    (0.2, 'p'),
    (0.2, 'y'),  #
    (0, "z"),
    (0.2, 'p'),
    (0.2, 's'),
    (0, "j"),
    (0.2, 'h'),
    (0.2, 's'),
    (0, "k"),
    (0.2, 'p'),
    (0.2, 'y'),
    (0, "l"),
    (0.2, 'p'),
    (0.2, 's'),
    (0.2, 'h'),
    (0, "k"),
    (0.2, 's'),
    (0, "z"),
    (0.2, 'p'),

    (0.3, 't'),
    (0, "h"),
    (0, "v"),
    (0.2, 'o'),
    (0.2, 'g'),
    (0, "c"),
    (0.2, 'h'),
    (0.2, 'g'),
    (0, "z"),
    (0.2, 'o'),
    (0.2, 't'),
    (0, "k"),
    (0.2, 'o'),
    (0.2, 'd'),
    (0.2, 'h'),
    (0.2, 'd'),
    (0.2, 'o'),
    (0.2, 't'),  #
    (0.2, 'o'),
    (0.2, 'f'),
    (0.2, 'k'),
    (0, "k"),
    (0.2, 'f'),
    (0.25, 'o'),
    (0.25, 't'),
    (0, "k"),
    (0, "x"),
    (0.25, 'o'),
    (0.25, 'f'),
    (0.3, 'l'),
    (0, "l"),
    (0, "v"),
    (0.35, 'f'),
    (0.4, 'o'),

    (1, 't'),
    (0.05, 'u'),
    (0.05, 's'),
    (0.05, 'h'),
    (0.05, 'l'),
    (0.05, 'x'),
    (0.05, 'm'),
    (0, 'm'),

]

# Execute the defined inputs
execute_inputs(inputs, start_index=0)

# Part 1.1 starts at index 0.
# Part 1.2 starts at index 102.
# Main bit starts at index 238.
# Epic bit .1 starts at index 402.
# Epic bit .2 starts at index 515.
# Part 2 starts at index 699.
